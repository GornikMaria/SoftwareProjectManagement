- **Статус:** Принято
    
- **Дата:** 5 февраля 2025

**1. Контекст и постановка проблемы:**

Необходимо выбрать систему управления базами данных (СУБД) для хранения данных системы "TL Food". Данные включают в себя:

- Информацию о пользователях (ФИО, табельный номер, контактные данные, настройки, фотографии для Face Recognition).
    
- Меню (список блюд, описания, цены, БЖУ, калорийность, фотографии, рейтинги, отзывы).
    
- Заказы (информация о заказах пользователей, состав заказа, дата, время, статус, история заказов).
    
- Настройки автозаказа (дни недели, источник блюд, бюджет).
    
- Избранные блюда пользователей.
    
- Отзывы пользователей о блюдах.
    
- Настройки уведомлений.
    
- Логи действий пользователей (аудит).
    

Требования к СУБД:

- **Надежность:** Высокая надежность и отказоустойчивость, обеспечение сохранности данных.
    
- **Производительность:** Достаточная производительность для обработки запросов от клиентских приложений и сервисов.
    
- **Масштабируемость:** Возможность увеличения объема хранимых данных и количества запросов в будущем.
    
- **Безопасность:** Защита данных от несанкционированного доступа.
    
- **Совместимость:** Совместимость с другими компонентами системы (C#, ASP.NET Core, TypeScript, React).
    
- **Соответствие стеку компании:** Соответствие технологическому стеку компании-заказчика (ООО "Трэвэлайн") и уже существующему проекту.
    
- **Простота обслуживания**
    

**2. Рассматриваемые варианты:**

- **Вариант 1: Microsoft SQL Server (MSSQL).**
    
    - Описание: Реляционная СУБД, разработанная компанией Microsoft.
        
    - Преимущества:
        
        - **Соответствие стеку компании:** MSSQL уже используется в существующем проекте "TL Food" и, вероятно, в других проектах компании "Трэвэлайн". Это ключевой фактор.
            
        - **Отличная интеграция с C# и ASP.NET Core:** MSSQL является "родной" СУБД для .NET-платформы, что обеспечивает максимальную совместимость и упрощает разработку.
            
        - **Высокая производительность и надежность:** MSSQL – это зрелая и проверенная СУБД, обеспечивающая высокую производительность и надежность.
            
        - **Широкие возможности:** MSSQL предоставляет широкий набор функций и инструментов для управления данными, обеспечения безопасности, резервного копирования и т.д.
            
        - **Наличие бесплатной версии (Express Edition):** Позволяет вести разработку и тестирование без затрат на лицензирование.
            
        - **Поддержка со стороны Microsoft:** Гарантированные обновления и исправления безопасности.
            
        - **Знакомство команды разработки**
            
    - Недостатки:
        
        - **Стоимость лицензии:** Для production-сервера может потребоваться платная лицензия (в зависимости от редакции и масштаба системы). Это нужно уточнить у заказчика.
            
        - **Менее распространен, чем MySQL/PostgreSQL:** Может быть сложнее найти специалистов по MSSQL (но в данном случае это не является проблемой, так как команда уже работает с MSSQL).
            
        - **Привязка к Windows Server**: (обычно)
            
- **Вариант 2: PostgreSQL.**
    
    - Описание: Открытая (open-source) реляционная СУБД.
        
    - Преимущества:
        
        - **Бесплатность:** PostgreSQL – бесплатная СУБД, не требующая лицензионных отчислений.
            
        - **Открытый исходный код:** Возможность модификации и адаптации под нужды проекта.
            
        - **Высокая производительность и надежность:** PostgreSQL – это мощная и надежная СУБД.
            
        - **Широкие возможности:** PostgreSQL поддерживает множество функций и расширений.
            
        - **Кроссплатформенность:** PostgreSQL работает на различных операционных системах (Windows, Linux, macOS).
            
        - **Большое сообщество:** Активное сообщество пользователей и разработчиков.
            
    - Недостатки:
        
        - **Несоответствие стеку компании:** PostgreSQL не используется в текущем проекте, что потребует дополнительных усилий по миграции данных и адаптации кода.
            
        - **Менее тесная интеграция с .NET:** Хотя существуют библиотеки для работы с PostgreSQL из C#, интеграция не такая "бесшовная", как с MSSQL.
            
- **Вариант 3: MySQL.**
    
    - Описание: Открытая (open-source) реляционная СУБД.
        
    - Преимущества:
        
        - **Бесплатность:** MySQL (Community Edition) – бесплатная СУБД.
            
        - **Широкая распространенность:** MySQL – одна из самых популярных СУБД в мире.
            
        - **Простота использования:** MySQL относительно проста в установке и настройке.
            
        - **Кроссплатформенность:** MySQL работает на различных операционных системах.
            
    - Недостатки:
        
        - **Несоответствие стеку компании:** MySQL не используется в текущем проекте.
            
        - **Менее тесная интеграция с .NET:** Аналогично PostgreSQL.
            
        - **Ограничения функциональности (в бесплатной версии):** Некоторые функции (например, полнотекстовый поиск) могут быть ограничены в бесплатной версии.
            
- **Вариант 4: MongoDB (NoSQL).**
    
    - Описание: Документоориентированная NoSQL СУБД.
        
    - Преимущества:
        
        - **Гибкость схемы:** MongoDB не требует жесткой схемы данных, что упрощает внесение изменений.
            
        - **Масштабируемость:** MongoDB хорошо масштабируется горизонтально.
            
        - **Производительность:** MongoDB может быть очень производительной для определенных типов нагрузок (например, для работы с большими объемами неструктурированных данных).
            
    - Недостатки:
        
        - **Несоответствие стеку компании:** MongoDB не используется в текущем проекте.
            
        - **Не подходит для реляционных данных:** MongoDB плохо подходит для хранения данных с большим количеством связей между таблицами (как в нашем случае – пользователи, меню, заказы).
            
        - **Отсутствие транзакций (в классическом понимании):** MongoDB поддерживает транзакции только на уровне одного документа, что может быть недостаточно для обеспечения целостности данных в сложных сценариях.
            
        - **Сложность реализации некоторых запросов.**
            

**3. Решение:**

Использовать **Microsoft SQL Server (MSSQL) (Вариант 1)**.

**4. Обоснование решения:**

- **Соответствие технологическому стеку компании-заказчика и существующему проекту:** Это главный аргумент. Использование MSSQL позволит:
    
    - Переиспользовать существующий код (связанный с работой с базой данных).
        
    - Избежать затрат времени и ресурсов на миграцию данных.
        
    - Упростить интеграцию с другими системами компании (если они тоже используют MSSQL).
        
    - Использовать опыт команды разработки, уже знакомой с MSSQL.
        
- **Отличная интеграция с C# и ASP.NET Core:** Это обеспечивает максимальную совместимость и упрощает разработку.
    
- **Высокая производительность, надежность и функциональность:** MSSQL – это зрелая и проверенная СУБД, которая соответствует всем требованиям проекта.
    
- **Наличие бесплатной версии (Express Edition):** достаточно для целей разработки.
    

Остальные варианты (PostgreSQL, MySQL, MongoDB) отклоняются, так как они не соответствуют технологическому стеку компании и потребуют дополнительных усилий по интеграции и адаптации.

**5. Детали реализации:**

- Использовать существующую базу данных MSSQL (если она есть) или развернуть новую базу данных на сервере компании.
    
- Использовать Entity Framework Core (ORM) для взаимодействия с базой данных из C# кода.
    
- Разработать схему базы данных (таблицы, связи, индексы) в соответствии с требованиями проекта.
    
- Настроить резервное копирование базы данных.
    
- Обеспечить безопасность базы данных (настройка прав доступа, защита от SQL-инъекций).
    

**6. Последствия:**

- **Положительные:**
    
    - Быстрая и эффективная разработка за счет использования знакомых технологий.
        
    - Минимизация рисков, связанных с интеграцией.
        
    - Высокая производительность и надежность системы.
        
    - Соответствие стандартам компании-заказчика.
        
- **Отрицательные:**
    
    - Потенциальные затраты на лицензирование MSSQL (если потребуется платная редакция).
        

**7. Метрики:**

- **Время отклика базы данных:** Среднее время выполнения запросов к базе данных.
    
- **Количество транзакций в секунду (TPS),** которое может обработать база данных.
    
- **Загрузка CPU и памяти** сервера базы данных.
    
- **Размер базы данных.**
    
- **Время восстановления из резервной копии.**