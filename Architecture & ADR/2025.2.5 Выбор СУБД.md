**ADR-003: Выбор системы управления базами данных (СУБД)**

- **Статус:** Принято
    
- **Дата:** 2025-02-04
    
**1. Контекст и постановка проблемы:**

Необходимо выбрать систему управления базами данных (СУБД) для хранения данных системы "TL Food". Данные включают в себя:

- Информацию о пользователях (ФИО, табельный номер, контактные данные, настройки, фотографии для Face Recognition).
    
- Меню (список блюд, описания, цены, БЖУ, калорийность, фотографии, рейтинги, отзывы).
    
- Заказы (информация о заказах пользователей, состав заказа, дата, время, статус, история заказов).
    
- Настройки автозаказа (дни недели, источник блюд, бюджет).
    
- Избранные блюда пользователей.
    
- Отзывы пользователей о блюдах.
    
- Настройки уведомлений.
    
- Логи действий пользователей (аудит).
    

Требования к СУБД:

- **Надежность:** Высокая надежность и отказоустойчивость, обеспечение сохранности данных (REL01, REL02).
    
- **Производительность:** Достаточная производительность для обработки запросов от клиентских приложений и сервисов (PER02, PER03, PER05).
    
- **Масштабируемость:** Возможность увеличения объема хранимых данных и количества запросов в будущем (SCA02).
    
- **Безопасность:** Защита данных от несанкционированного доступа (SEC06).
    
- **Совместимость:** Совместимость с другими компонентами системы (C#, ASP.NET Core, TypeScript, React).
    
- **Соответствие стеку компании:** Соответствие технологическому стеку компании-заказчика (ООО "Трэвэлайн") и уже существующему проекту.
    
- **Простота обслуживания**
    

**2. Альтернативы (с кратким описанием преимуществ и недостатков):**

1. **Microsoft SQL Server (MSSQL):**
    
    - Преимущества: Соответствие стеку компании, отличная интеграция с .NET, высокая производительность, надежность, широкие возможности, наличие бесплатной версии (Express Edition), поддержка со стороны Microsoft, знакомство команды разработки.
        
    - Недостатки: Стоимость лицензии, менее распространен, чем MySQL/PostgreSQL, привязка к Windows Server (обычно).
        
2. **PostgreSQL:**
    
    - Преимущества: Бесплатность, открытый исходный код, высокая производительность, надежность, широкие возможности, кроссплатформенность, большое сообщество.
        
    - Недостатки: Несоответствие стеку компании, менее тесная интеграция с .NET.
        
3. **MySQL:**
    
    - Преимущества: Бесплатность, широкая распространенность, простота использования, кроссплатформенность.
        
    - Недостатки: Несоответствие стеку компании, менее тесная интеграция с .NET, ограничения функциональности (в бесплатной версии).
        
4. **MongoDB (NoSQL):**
    
    - Преимущества: Гибкость схемы, масштабируемость, производительность для определенных типов нагрузок.
        
    - Недостатки: Несоответствие стеку компании, не подходит для реляционных данных, отсутствие транзакций (в классическом понимании), сложность реализации некоторых запросов.
        

**3. Решение:**

Использовать **Microsoft SQL Server (MSSQL)** (Вариант 1).

**4. Обоснование решения:**

- **Первостепенный фактор: Соответствие технологическому стеку компании-заказчика и существующему проекту:** Это позволяет:
    
    - Переиспользовать существующий код (связанный с работой с базой данных).
        
    - Избежать затрат времени и ресурсов на миграцию данных.
        
    - Упростить интеграцию с другими системами компании (если они тоже используют MSSQL).
        
    - Использовать опыт команды разработки, уже знакомой с MSSQL.
        
- Второстепенные факторы:
    
    - Интеграция с ASP.NET Core
        

**5. Последствия:**

- Согласованность: Выбрана технология, соответствующая существующему стеку компании, что упрощает интеграцию и поддержку.
    
- Производительность: Выбранная СУБД (MSSQL) обеспечивает приемлемую производительность для ожидаемых нагрузок (PER02, PER03, PER05).
    
- Масштабируемость: MSSQL предоставляет достаточные возможности масштабирования для будущих потребностей (SCA02).
    
- Безопасность: MSSQL предоставляет необходимые механизмы для обеспечения безопасности данных (SEC06).
    
- Лицензирование: Затраты на лицензирование уже учтены заказчиком
    

**6. Риски:**

- **(Сложность администрирования):** Администрирование MSSQL может быть сложным для неопытных администраторов.
    
    - Смягчение: Поскольку сервер предоставляет заказчик, предполагается, что у него есть администраторы с опытом работы с MSSQL. В случае необходимости – обучени
- **(Блокировка вендора):** Зависимость от проприетарной технологии
    
    - Смягчение: Использование ORM для абстрагирования от особенностей СУБД, не использовать расширенные фичи MSSQL.